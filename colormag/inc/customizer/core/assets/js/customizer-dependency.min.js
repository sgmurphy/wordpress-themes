!function(o){"use strict";var e=wp.customize,n={controls:{},init:function(){var o=this;o.handleDependency(),o.hideEmptySections(),e.bind("change",(function(e,n){o.hasDependentControls(e.id)&&(o.handleDependency(),o.hideEmptySections())}))},handleDependency:function(){var o=this,n=e.get();o.checked_controls={},_.each(n,(function(n,i){var r=e.control(i);o.checkControlVisibility(r,i)}))},checkControlVisibility:function(o,n){var i=e.get();if(!_.isUndefined(o)&&void 0!==ColorMagCustomizerControlsToggle[n]){var r=!1,t=ColorMagCustomizerControlsToggle[n],s=_.isUndefined(t.conditions)?t:t.conditions,a=_.isUndefined(t.operator)?"AND":t.operator;void 0!==s&&(r=this.checkDependency(s,i,a),this.checked_controls[n]=r,r?o.container.removeClass("colormag-hide"):o.container.addClass("colormag-hide"))}},checkDependency:function(n,i,r){var t=this,s=!0,a=!1,c=n[0];if(_.isString(c)){var l,d=n[1],g=n[2];if(!_.isUndefined(ColorMagCustomizerControlsToggle[c])){n=_.isUndefined(ColorMagCustomizerControlsToggle[c].conditions)?ColorMagCustomizerControlsToggle[c]:ColorMagCustomizerControlsToggle[c].conditions;var C=_.isUndefined(ColorMagCustomizerControlsToggle[c].operator)?"AND":ColorMagCustomizerControlsToggle[c].operator;if(!_.isUndefined(n))if(t.checkDependency(n,i,C))e.control(c).container.removeClass("colormag-hide");else if(a=!0,s=!1,"AND"==r)return}_.isUndefined(i[c])||a||!s||(l=i[c],s=t.compareValues(l,d,g))}else _.isArray(c)&&(o.each(n,(function(o,n){var c=n[0],l=n[1],d=n[2],g=_.isUndefined(i[c])?"":i[c];if(void 0!==ColorMagCustomizerControlsToggle[c]){var C=_.isUndefined(ColorMagCustomizerControlsToggle[c].conditions)?ColorMagCustomizerControlsToggle[c]:ColorMagCustomizerControlsToggle[c].conditions,u=_.isUndefined(ColorMagCustomizerControlsToggle[c].operator)?"AND":ColorMagCustomizerControlsToggle[c].operator;if(!_.isUndefined(C))if(t.checkDependency(C,i,u))s=!0,e.control(c).container.removeClass("colormag-hide");else if(s=!1,"AND"==r)return}else s=!0;if(s)if("AND"==r){if(!t.compareValues(g,l,d))return s=!1,!1}else t.compareValues(g,l,d)?(a=!0,s=!0):s=!1})),a&&"OR"==r&&(s=!0));return s},compareValues:function(e,n,i){var r=!1;switch(n){case"===":r=e===i;break;case">":r=e>i;break;case"<":r=e<i;break;case"<=":r=e<=i;break;case">=":r=e>=i;break;case"!=":r=e!=i;break;case"empty":var t=_.clone(e);_.isObject(t)||_.isArray(t)?(_.each(t,(function(o,e){_.isEmpty(o)&&delete t[e]})),r=!!_.isEmpty(t)):r=!(!_.isNull(t)&&""!=t);break;case"not_empty":t=_.clone(e);(_.isObject(t)||_.isArray(t))&&_.each(t,(function(o,e){_.isEmpty(o)&&delete t[e]})),r=!_.isEmpty(t);break;case"contains":_.isArray(e)&&-1!==o.inArray(i,e)&&(r=!0);break;default:r=_.isArray(i)?!_.isEmpty(i)&&!_.isEmpty(e)&&_.contains(i,e):e==i}return r},hideEmptySections:function(){o("ul.accordion-section.control-section-colormag_section").each((function(){var e=o(this).attr("id"),n=!1,i=o(this).find(" > .customize-control");i.length>0&&(i.each((function(){o(this).hasClass("colormag-hide")||"none"==o(this).css("display")||(n=!0)})),n?o('.control-section[aria-owns="'+e+'"]').removeClass("colormag-hide"):o('.control-section[aria-owns="'+e+'"]').addClass("colormag-hide"))}))},hasDependentControls:function(e){var n=!1;return o.each(ColorMagCustomizerControlsToggle,(function(i,r){if(_.isUndefined(r.conditions)){var t=r[0];if(e==t)return void(n=!0)}else{var s=r.conditions;o.each(s,(function(o,i){var r=i[0];e!=r||(n=!0)}))}})),n}};o((function(){n.init()}))}(jQuery);